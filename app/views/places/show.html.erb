<h1><%= @place["name"] %></h1>

<h2>My Entries</h2>

<div class="row">
  <% for entry in @entries %>
    <div class="col-sm-6 col-md-3">
      <h4>
        <%# find user who created post %>
        <% user = User.find_by({ "id" => post["user_id"] }) %>
        <%# handle any potential bad data where the post is missing a user %>
        <% if user != nil %>
         <%= user["username"] %>
        <% else %>
          anonymous
        <% end %>
      </h4>
      
      <%# conditionally display attached file if post.uploaded_image.attached? %>
      <% if post.uploaded_image.attached? %>
        <img src="<%= url_for(post.uploaded_image) %>" class="img-fluid">
        <%# use url_for(post.uploaded_image) as attached file's url %>
      <%# otherwise display original image url from database column %>
      <% else %>
        <img src="<%= post["image"] %>" class="img-fluid">
      <% end %>
      <h3><%= entry["title"] %></h3>
      <h4><%= entry["occurred_on"] %></h4>
      <p><%= entry["description"] %></p> 
    </div>
  <% end %>
</div>

<p>
  <a href="/entries/new?place_id=<%= @place["id"] %>">New Entry</a>
</p>

<p>
  <a href="/places">Back to All Places</a>
</p>